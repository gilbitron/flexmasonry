/*!
 * FlexMasonry
 * Version: 0.2.3
 * Author: Gilbert Pellegrom <gilbert@pellegrom.me>
 * License: MIT
 */
const defaultOptions={responsive:!0,breakpointCols:{"min-width: 1500px":6,"min-width: 1200px":5,"min-width: 992px":4,"min-width: 768px":3,"min-width: 576px":2},numCols:4};let _resizeId=null,_options={},_targets=[];function init(targets,options={}){return _targets="string"==typeof targets?document.querySelectorAll(targets):targets,_options=Object.assign(defaultOptions,options),_targets.forEach((function(target){setUp(target),setHeight(target)})),addEventListeners(),this}function setUp(target){target.classList.add("flexmasonry"),_options.responsive&&target.classList.add("flexmasonry-responsive"),setColsClass(target),Array.from(target.children).forEach((function(item){item.classList.add("flexmasonry-item")})),addBreakElements(target)}function onLoad(){_targets.forEach((function(target){setHeight(target)}))}function onResize(){_resizeId&&window.cancelAnimationFrame(_resizeId),_resizeId=window.requestAnimationFrame((function(){refreshAll()}))}function addEventListeners(){window.addEventListener("load",onLoad),window.addEventListener("resize",onResize)}function removeEventListeners(){window.removeEventListener("load",onLoad),window.removeEventListener("resize",onResize)}function setHeight(target){if(getCurrentCols()<2)return void target.style.removeProperty("height");let heights=[];Array.from(target.children).forEach((function(item){if(item.classList.contains("flexmasonry-break"))return;const comp=window.getComputedStyle(item),order=comp.getPropertyValue("order"),height=comp.getPropertyValue("height");heights[order-1]||(heights[order-1]=0),heights[order-1]+=Math.ceil(parseFloat(height))}));const maxHeight=Math.max(...heights);target.style.height=maxHeight+"px"}function addBreakElements(target){const breakEls=target.querySelectorAll(".flexmasonry-break");if(Array.from(breakEls).length!==getCurrentCols()-1)for(let i=1;i<getCurrentCols();i++){const breakDiv=document.createElement("div");breakDiv.classList.add("flexmasonry-break"),breakDiv.classList.add("flexmasonry-break-"+i),target.appendChild(breakDiv)}}function removeBreakElements(target){const breakEls=target.querySelectorAll(".flexmasonry-break");Array.from(breakEls).length!==getCurrentCols()-1&&Array.from(breakEls).forEach((function(breakEl){breakEl.parentNode.removeChild(breakEl)}))}function setColsClass(target){target.classList.contains("flexmasonry-cols-"+getCurrentCols())||(target.className=target.className.replace(/(flexmasonry-cols-\d+)/,""),target.classList.add("flexmasonry-cols-"+getCurrentCols()))}function getCurrentCols(){if(!_options.responsive)return _options.numCols;const keys=Object.keys(_options.breakpointCols);for(const key of keys)if(window.matchMedia("("+key+")").matches)return _options.breakpointCols[key];return 1}function refresh(target,options={}){return _options=Object.assign(defaultOptions,options),setColsClass(target),removeBreakElements(target),addBreakElements(target),setHeight(target),this}function refreshAll(options={}){return _targets.forEach((function(target){refresh(target,options)})),this}function destroyAll(){removeEventListeners()}export default{init:init,refresh:refresh,refreshAll:refreshAll,destroyAll:destroyAll};